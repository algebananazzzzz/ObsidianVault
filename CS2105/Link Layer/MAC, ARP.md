# Topology

| Bus                                                                                                                              | Hub                                                                                                                                                                          | Star                                                                                                                                             |
| -------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| ![[Bus Topology.svg]]                                                                                                            | ![[Hub Topology.svg]]                                                                                                                                                        | ![[Star Topology.svg]]                                                                                                                           |
| - **Broadcast LAN** (original Ethernet)<br>- All transmitted frames received by all nodes<br>- Collisions very common → slow<br> | - A **hub** is a **physical-layer repeater**<br>- Cheap and easy to maintain<br>- Takes **incoming bits** from one port, boosts signal and repeats it out of all other ports | - A **switch** is a **link-layer device**<br>- Reads **MAC addresses**, uses a **switch table** to forward frames to **correct port** (or flood) |
| <br>- If the central cable breaks → whole LAN fails                                                                              | - LAN remains one big collision domain → slow                                                                                                                                | - No collisions because each port is a **separate collision domain**                                                                             |
## Hub vs Switches

| Hub                                                                                         | Switch                                                                                                                                               |
| ------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Half duplex:** hub destroys it by electrically connecting everything into a single **RX** | **Full duplex:** ethernet uses separate wiring for **TX/RX** (no need for **CSMA/CD**)                                                               |
| No such concept                                                                             | Maintains **switch table:**<br>**<MAC, interface, TTL>**<br>1. Discovers hosts when receiving frames<br>2. Else, flood on all interfaces as fallback |
| **No buffer:** immediate forwarding                                                         | **Buffers frames** when RX is congested                                                                                                              |
## MAC vs ARP

| ARP Table                                                                          | MAC Forwarding Table                                                     |
| ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| **IP address → MAC address**                                                       | **MAC address → Switch port**                                            |
| Stored in end hosts and routers (L3)                                               | Stored in switches (L2)                                                  |
| Populated only when:<br>- An ARP request is received<br>- An ARP reply is received | Populated automatically when<br>- Switch receives any Ethernet frame<br> |
### MAC Address Handling

| IP address                      | MAC address                                              |
| ------------------------------- | -------------------------------------------------------- |
| 32-bit                          | 48-bit                                                   |
| Dynamically assigned, hierachal | Permanent, administered<br>by IEEEE, burned into NIC ROM |
| Move datagrams from src to dest | Move frames over single links                            |
### How Hosts Send Frames

| Same Subnet                                                                                                                                                                                                                                                                                                                                                                                                                  | Different Subnet                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1. Host A checks: `dest_IP in my subnet?` → **Yes**<br>(Subnet mask etc. known from DHCP)<br>2. A checks ARP cache for `dest_IP → MAC`.<br>3. If missing → **ARP Request (broadcast)**<br>4. Destination B sends **ARP Reply (unicast)**<br>5. A builds Ethernet frame:<br>    - Dest MAC = **B's MAC** <br>    - Src MAC = **A's MAC**<br>    - Payload = IP packet (dest_IP = B)<br>- A sends frame → switch forwards to B | 1. Host A checks: `dest_IP in subnet?` → **No**<br>2. A identifies **default gateway IP** (router IP)<br>3. A checks ARP cache for gateway_IP → MAC<br>4. If missing → ARP Request (broadcast)<br>5. Router sends ARP Reply (unicast)<br>6. A builds Ethernet frame:<br>    - Dest MAC = **router’s MAC**<br>    - Src MAC = **A's MAC**<br>    - Payload = IP packet (dest_IP = remote_IP)<br>7. Switch forwards frame to router<br>8. Router strips MAC header, forwards packet to next hop |



